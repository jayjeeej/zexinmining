# Scratchpad

## 当前任务：分析网站索引构建日志
[X] 查看用户提供的日志内容
[X] 分析索引构建过程
[X] 确认索引项构建情况

索引构建日志显示：
- 系统根据图片路径识别内容类型（产品、新闻、案例）
- 中文(zh)和英文(en)索引都已成功构建
- 每种语言生成了103个索引项
- 产品索引基于图片路径和href链接创建
- 新闻索引通过图片路径识别并生成对应URL
- 案例索引同样基于图片路径创建
- 索引文件已成功保存至：
  - /opt/build/repo/public/data/search-index-zh.json
  - /opt/build/repo/public/data/search-index-en.json

日志最后显示"搜索索引生成完成! 我们新闻确定有静态网页了吧"，表明索引构建成功完成，并且新闻页面已正确生成。

## 新任务：研究优化SEO的文章发布频率
[X] 收集关于文章发布频率的专家建议
[X] 分析不同发布频率的SEO效果
[X] 总结最佳实践建议

研究结果显示：
- 没有"一刀切"的最佳发布频率，应根据具体情况决定
- 质量比数量更重要，高质量内容的SEO效果远好于频繁发布低质量内容
- 对于小型网站或个人博客，每周1-2篇高质量文章是理想频率
- 对于新网站建立初期，可能需要更频繁发布（每周3-4篇）以建立权威性
- 内容深度和复杂性会影响理想发布频率
- 保持一致性比发布频率本身更重要
- 定期更新现有内容对SEO也很有价值（"红木策略"）
- 应将80%的时间用于推广和业务建设，只将20%的时间用于内容创作

## 新任务：解决Next.js页面跳转闪黑屏问题
[X] 分析页面闪黑屏的原因
[X] 收集解决方案
[X] 总结最佳实践

研究结果：
- 闪黑屏问题主要原因：
  - 客户端导航时页面完全卸载重新渲染导致的短暂黑屏
  - 深色模式/亮色模式切换时localStorage无法在服务端获取，导致初始渲染与客户端偏好不匹配
  - Next.js的异步页面加载时loading.tsx优先显示，导致已渲染内容被隐藏

- 解决方案：
  1. 针对客户端导航闪黑：
     - 确保使用Next.js的Link组件实现客户端导航，避免完全页面重载
     - 添加页面过渡动画，使页面切换更平滑

  2. 针对暗色模式闪烁：
     - 在HTML head中添加内联脚本，在页面渲染前读取localStorage并设置正确的主题类
     - 脚本示例：
     ```js
     (function() {
       var theme = localStorage.getItem('theme');
       if (theme === 'dark') document.documentElement.classList.add('dark');
     })();
     ```

  3. 针对异步页面加载问题：
     - 避免在必要的SSR页面中使用loading.tsx
     - 考虑使用React Suspense和dynamic imports进行代码分割
     - 如果必须使用loading.tsx，确保初始加载状态设计与最终页面一致，减少视觉跳动 